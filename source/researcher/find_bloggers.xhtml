<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:d="http://dneero.com/taglib"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      xmlns:a4j="https://ajax4jsf.dev.java.net/ajax">

<ui:composition template="/template/template-facelets.xhtml">
    <ui:define name="title">Find Bloggers</ui:define>
    <ui:param name="navtab" value="researchers"/>
    <ui:define name="body">
    <d:authorization acl="researcher" redirectonfail="true"/>

    <h:form id="panels">

    <t:div rendered="#{researcherFindBloggers.msg ne '' and researcherFindBloggers.msg ne null}">
        <center><div class="rounded" style="background: #F2FFBF; text-align: left; padding: 20px;"><font class="smallfont">
        <img src="/images/lightbulb_on.png" alt="" align="right"/>
        #{researcherFindBloggers.msg}
        <br/><br/></font></div></center>
        <br/><br/>
    </t:div>

    <t:saveState id="save" value="#{researcherFindBloggers}"/>
    <h:selectOneMenu value="#{researcherFindBloggers.panelid}" id="panelid" required="true" rendered="#{!empty researcherFindBloggers.listitems}">
       <f:selectItems value="#{researcherFindBloggers.panelids}"/>
    </h:selectOneMenu>
    <h:commandButton action="#{researcherFindBloggers.addAllToPanel}" value="Add All Bloggers Listed to Panel" styleClass="formsubmitbutton" rendered="#{!empty researcherFindBloggers.listitems}"></h:commandButton>
    <t:div rendered="#{!empty researcherFindBloggers.listitems}">
        <br/>
        <font class="smallfont">You can add an individual blogger to a panel by viewing his/her Blogger Profile.</font>
        <br/><br/>
    </t:div>
    <rich:dataTable value="#{researcherFindBloggers.listitems}" rows="50" bandingInterval="2" banding="row" var="listitem" rendered="#{!empty researcherFindBloggers.listitems}">
      <h:column>
        <f:facet name="header">
          <h:outputText value="Blogger Name"/>
        </f:facet>
        <h:outputText value="#{listitem.user.lastname}, #{listitem.user.firstname}" styleClass="normalfont"/>
      </h:column>
      <h:column>
        <f:facet name="header">
          <h:outputText value="Social Influence Rating (TM)"/>
        </f:facet>
        <h:outputText value="Top #{listitem.socialinfluenceratingpercentile}%" styleClass="normalfont"/>
      </h:column>
      <h:column>
        <f:facet name="header">
          <h:outputText value="-" style="color: #ffffff;"/>
        </f:facet>
        <h:commandLink action="#{researcherBloggerProfile.beginView}">
            <h:outputText value="Blogger's Profile" escape="false" styleClass="smallfont"/>
            <f:param name="bloggerid" value="#{listitem.blogger.bloggerid}" />
        </h:commandLink>
      </h:column>
    </rich:dataTable>
    <t:div rendered="#{!empty researcherFindBloggers.listitems}">
        <br/><br/>
    </t:div>


    <h:panelGrid columns="4" cellpadding="3" border="0" rendered="#{empty researcherFindBloggers.listitems}">



        <h:panelGroup>
            <h:outputText value="Social Influence Rating (TM)" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:outputText value="Social Influence Rating takes site traffic, survey referrals and a number of other metrics into account to give you some measure of this blogger's influence with his/her readership." styleClass="smallfont"></h:outputText>
            <br/>
            <h:message for="minsocialinfluencepercentile" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectOneMenu value="#{researcherFindBloggers.minsocialinfluencepercentile}" id="minsocialinfluencepercentile" required="true">
               <f:selectItems value="#{percentiles}"/>
            </h:selectOneMenu>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Social Influence Rating 90 Days" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="minsocialinfluencepercentile90days" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectOneMenu value="#{researcherFindBloggers.minsocialinfluencepercentile90days}" id="minsocialinfluencepercentile90days" required="true">
               <f:selectItems value="#{percentiles}"/>
            </h:selectOneMenu>
        </h:panelGroup>

        



        <h:panelGroup>
            <h:outputText value="Blog Quality of At Least" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:outputText value="Blog Quality is determined manually by our administrators visiting each blog post and assigning a general quality rating." styleClass="smallfont"></h:outputText>
            <br/>
            <h:message for="blogquality" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <rich:inputNumberSlider value="#{researcherFindBloggers.blogquality}" id="blogquality" width="200" minValue="0" maxValue="10" step="1"/>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Blog Quality Over Last 90 Days of At Least" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="blogquality90days" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <rich:inputNumberSlider value="#{researcherFindBloggers.blogquality90days}" id="blogquality90days" width="200" minValue="0" maxValue="10" step="1"/>
        </h:panelGroup>






        <h:panelGroup>
            <h:outputText value="Age Range" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="agemin" styleClass="RED"></h:message>
            <h:message for="agemax" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:inputText value="#{researcherFindBloggers.agemin}" id="agemin" size="3" required="true">
                <f:validateDoubleRange minimum="1" maximum="120"></f:validateDoubleRange>
            </h:inputText>
            <h:outputText value=" - "></h:outputText>
            <h:inputText value="#{researcherFindBloggers.agemax}" id="agemax" size="3" required="true">
                <f:validateDoubleRange minimum="1" maximum="120"></f:validateDoubleRange>
            </h:inputText>
        </h:panelGroup>




        <h:panelGroup>
            <h:outputText value="Gender" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="gender" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyCheckbox value="#{researcherFindBloggers.gender}" id="gender" required="true">
                <f:selectItems value="#{genders}"/>
            </h:selectManyCheckbox>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Ethnicity" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="ethnicity" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.ethnicity}" id="ethnicity" size="6" layout="pageDirection" required="true">
                <f:selectItems value="#{ethnicities}"/>
            </h:selectManyListbox>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Marital Status" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="maritalstatus" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyCheckbox value="#{researcherFindBloggers.maritalstatus}" id="maritalstatus" required="true">
                <f:selectItems value="#{maritalstatuses}"/>
            </h:selectManyCheckbox>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputText value="Income" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="income" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.income}" size="5" id="income" layout="pageDirection" required="true">
                <f:selectItems value="#{incomes}"/>
            </h:selectManyListbox>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputText value="Education" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="educationlevel" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyCheckbox value="#{researcherFindBloggers.educationlevel}" id="educationlevel" layout="pageDirection" required="true">
                <f:selectItems value="#{educationlevels}"/>
            </h:selectManyCheckbox>
        </h:panelGroup>



        <h:panelGroup>
            <h:outputText value="State" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="state" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.state}" size="5" id="state" layout="pageDirection" required="true">
                <f:selectItems value="#{states}"/>
            </h:selectManyListbox>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputText value="City" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="city" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.city}" size="5" id="city" layout="pageDirection" required="true">
                <f:selectItems value="#{cities}"/>
            </h:selectManyListbox>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Profession" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="profession" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.profession}" size="5" id="profession" layout="pageDirection" required="true">
                <f:selectItems value="#{professions}"/>
            </h:selectManyListbox>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Blog Focus" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="blogfocus" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.blogfocus}" size="5" id="blogfocus" layout="pageDirection" required="true">
                <f:selectItems value="#{blogfocuses}"/>
            </h:selectManyListbox>
        </h:panelGroup>


        <h:panelGroup>
            <h:outputText value="Politics" styleClass="formfieldnamefont"></h:outputText>
            <br/>
            <h:message for="politics" styleClass="RED"></h:message>
        </h:panelGroup>
        <h:panelGroup>
            <h:selectManyListbox value="#{researcherFindBloggers.politics}" size="5" id="politics" layout="pageDirection" required="true">
                <f:selectItems value="#{politics}"/>
            </h:selectManyListbox>
        </h:panelGroup>

        <h:panelGroup>
        </h:panelGroup>
        <h:panelGroup>
        </h:panelGroup>








    </h:panelGrid>
    <br/><br/>
    <h:commandButton action="#{researcherFindBloggers.search}" value="Find Bloggers" styleClass="formsubmitbutton" rendered="#{empty researcherFindBloggers.listitems}"></h:commandButton>
    <h:commandButton action="#{researcherFindBloggers.resetSearch}" value="Reset Search" styleClass="formsubmitbutton" rendered="#{!empty researcherFindBloggers.listitems}"></h:commandButton>
        

    </h:form>

</ui:define>


</ui:composition>
</html>


