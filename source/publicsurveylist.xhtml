<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:d="http://dneero.com/taglib"
      xmlns:c="http://java.sun.com/jstl/core"

      >

<ui:composition template="/template/template-facelets.xhtml">
    <ui:define name="title">Survey Opportunities<br/><br/></ui:define>
    <ui:param name="navtab" value="home"/>
    <ui:define name="body">
    <d:authorization acl="public" redirectonfail="true"/>



<h:form>

    <table cellpadding="0" border="0" width="100%">
        <tr>
            <td valign="top">


                <t:saveState id="save" value="#{publicSurveyList}"/>
                <h:outputText value="There are currently no surveys listed.  Please check back soon as we're always adding new ones!" styleClass="mediumfont" rendered="#{empty publicSurveyList.surveys}"/>

                <t:dataTable sortable="true" id="datatable" value="#{publicSurveyList.surveys}" rows="15" var="srvy" rendered="#{!empty publicSurveyList.surveys}" styleClass="dataTable" headerClass="theader" footerClass="theader" rowClasses="trow1,trow2" columnClasses="tcol,tcolnowrap,tcol,tcolnowrap,tcolnowrap">
                  <t:column>
                    <f:facet name="header">
                        <h:outputText value=""/>
                    </f:facet>
                    <div class="rounded" style="background: #e6e6e6; padding: 10px;">
                        <table cellpadding="0" border="0" width="100%">
                            <tr>
                                <td>
                                    <h:outputLink value="/survey.jsf?surveyid=#{srvy.surveyid}" style="text-decoration: none;">
                                        <h:outputText value="#{srvy.title}" styleClass="normalfont" style="font-weight: bold; color: #0000ff;"/>
                                    </h:outputLink><br/>
                                    <h:outputText value="#{srvy.description}" escape="false" styleClass="tinyfont"/><br/><br/>
                                    <font class="tinyfont"><b>#{srvy.daysuntilend} | #{srvy.isbloggerqualifiedstring}</b></font>
                                </td>
                                <!--
                                <c:if test="#{userSession.isloggedin}">
                                    <td width="20%">
                                        <div class="rounded" style="background: #e6e6e6; padding: 10px;">
                                            <center>
                                                <c:if test="#{!srvy.loggedinuserhasalreadytakensurvey}">
                                                    <c:if test="#{srvy.isloggedinuserqualified}">
                                                        <font class="smallfont"><b>You Qualify</b></font><br/><img src="/images/play-star-16.png" alt="" width="16" height="16"/>
                                                    </c:if>
                                                    <c:if test="#{!srvy.isloggedinuserqualified}">
                                                        <font class="smallfont"><b>You Don't Qualify</b></font><br/><img src="/images/delete-alt-16.png" alt="" width="16" height="16"/>
                                                    </c:if>
                                                </c:if>
                                                <c:if test="#{srvy.loggedinuserhasalreadytakensurvey}">
                                                    <font class="smallfont"><b>You've Already Taken It</b></font><br/><img src="/images/ok-16.png" alt="" width="16" height="16"/>
                                                </c:if>
                                            </center>
                                        </div>
                                    </td>
                                </c:if>
                                -->
                                <td width="20%">
                                    <div class="rounded" style="background: #ffffff; padding: 10px;">
                                        <center>
                                            <font class="smallfont"><b>Earn Up To</b></font><br/>
                                            <font class="mediumfont">#{srvy.maxearning}</font>
                                        </center>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                  </t:column>
                </t:dataTable>
                <t:dataScroller id="scroll_1" for="datatable" fastStep="10" pageCountVar="pageCount" pageIndexVar="pageIndex" styleClass="scroller" paginator="true" paginatorMaxPages="9" paginatorTableClass="paginator" paginatorActiveColumnStyle="font-weight:bold;">
                    <f:facet name="first" >
                        <t:graphicImage url="/images/datascroller/play-first.png" border="0" />
                    </f:facet>
                    <f:facet name="last">
                        <t:graphicImage url="/images/datascroller/play-forward.png" border="0" />
                    </f:facet>
                    <f:facet name="previous">
                        <t:graphicImage url="/images/datascroller/play-back.png" border="0" />
                    </f:facet>
                    <f:facet name="next">
                        <t:graphicImage url="/images/datascroller/play.png" border="0" />
                    </f:facet>
                </t:dataScroller>

            </td>

            <c:if test="#{userSession.isfacebookui}">
                <td valign="top" width="50%">
                    <div class="rounded" style="background: #e6e6e6; padding: 10px;">
                        <font class="mediumfont">Surveys Friends Have Taken:</font><br/>
                        <c:if test="${empty publicSurveyList.facebookSurveyThatsBeenTakens}">
                            <font class="tinyfont">Your friends haven't taken any surveys yet.</font>
                        </c:if>
                        <c:forEach var="surveyfriendstook" items="${publicSurveyList.facebookSurveyThatsBeenTakens}">
                            <a href="/survey.jsf?surveyid=#{surveyfriendstook.survey.surveyid}"><font class="normalfont" style="font-weight: bold; color: #0000ff;">#{surveyfriendstook.survey.title}</font></a><br/>
                            <font class="smallfont">
                                Who took it:
                                <c:forEach var="friendwhotook" items="${surveyfriendstook.facebookSurveyTakers}">
                                    <a href="/survey.jsf?surveyid=#{surveyfriendstook.survey.surveyid}&amp;userid=#{friendwhotook.userid}&amp;responseid=#{friendwhotook.responseid}&amp;permitbeforefacebookappadd=1&amp;show=showSurveyResponseFlashEmbed">#{friendwhotook.facebookUser.first_name} #{friendwhotook.facebookUser.last_name}</a>
                                </c:forEach>
                            </font><br/><br/>
                        </c:forEach>

                        <br/><br/>
                        <font class="mediumfont">Friends on dNeero:</font><br/>
                        <c:if test="${empty publicSurveyList.facebookuserswhoaddedapp}">
                            <font class="tinyfont">None, yet.</font><br/>
                        </c:if>
                        <c:forEach var="fbuser" items="${publicSurveyList.facebookuserswhoaddedapp}">
                            <!--<img src="/images/user-16.png" width="16" height="16" border="0" align="middle" alt=""/>-->
                            <img src="#{fbuser.facebookUser.pic_square}" width="50" height="50" border="0" align="middle" alt=""/>
                            <br/>
                            <font class="tinyfont">#{fbuser.facebookUser.first_name} #{fbuser.facebookUser.last_name}</font><br/><br/>
                        </c:forEach>
                        <br/><br/>
                        <font class="mediumfont">Tell Friends Who Aren't Yet Using dNeero:</font><br/>
                        <h:message for="facebookfriendsselected" styleClass="RED"></h:message>
                        <h:selectManyCheckbox value="#{publicSurveyList.facebookfriendsselected}" layout="pageDirection" id="facebookfriendsselected" required="false" style="font-weight: bold;" styleClass="tinyfont">
                            <f:selectItems value="#{publicSurveyList.facebookusersnotaddedapp}"/>
                        </h:selectManyCheckbox>
                        <br/>
                        <h:commandButton action="#{publicSurveyList.tellFriends}" value="Tell Friends" styleClass="formsubmitbutton"/>
                    </div>
                </td>
            </c:if>

        </tr>
    </table>

</h:form>

</ui:define>


</ui:composition>
</html>



